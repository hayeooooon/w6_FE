{"ast":null,"code":"// user.js\nimport { apis } from '../../api/index'; // action\n\nconst SIGNIN = 'user/SIGNIN';\nconst SIGNOUT = 'user/SIGNOUT';\nconst SIGNUP = 'user/SIGNUP'; // initial state \n\nconst initialState = {\n  user: [],\n  mypage: []\n}; // action creator\n\nexport const signIn = user_info => {\n  return {\n    type: SIGNIN,\n    user_info\n  };\n};\nexport const signOut = () => {\n  return {\n    type: SIGNOUT\n  };\n};\nexport const signUp = user_info => {\n  return {\n    type: SIGNUP,\n    signUp\n  };\n}; // middlewares\n\nexport const signInAxios = user_info => {\n  return async dispatch => {\n    const user = await apis.signIn(user_info);\n    const userId = user.data.id; // db 연결 후 : userId\n\n    dispatch(signIn({ ...user_info,\n      userId: userId\n    }));\n  };\n};\nexport const signOutAxios = () => {\n  return async dispatch => {\n    // apis.signOut(); db 연결 후 살리기\n    dispatch(signOut());\n  };\n};\nexport const signUpAxios = user_info => {\n  return async (dispatch, useState, _ref) => {\n    let {\n      history\n    } = _ref;\n    await apis.signUp(user_info);\n    await dispatch(signUp(user_info));\n    history.push('/', {\n      replace: true\n    });\n  };\n};\nexport const loadMypageAxios = () => {\n  return async dispatch => {\n    const mypageData = await apis.mypage();\n    console.log(mypageData);\n  };\n}; // reducer\n\nexport default function reducer() {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n  let action = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  switch (action.type) {\n    case 'user/SIGNIN':\n      {\n        const user_info = { ...action.user_info\n        };\n        return {\n          user: [user_info],\n          mypage: []\n        };\n      }\n\n    case 'user/SIGNOUT':\n      {\n        return {\n          user: [],\n          mypage: []\n        };\n      }\n\n    case 'user/SIGNUP':\n      {\n        return state;\n      }\n\n    default:\n      {\n        return state;\n      }\n  }\n}","map":{"version":3,"names":["apis","SIGNIN","SIGNOUT","SIGNUP","initialState","user","mypage","signIn","user_info","type","signOut","signUp","signInAxios","dispatch","userId","data","id","signOutAxios","signUpAxios","useState","history","push","replace","loadMypageAxios","mypageData","console","log","reducer","state","action"],"sources":["/Users/hayeonkim/Desktop/sparta_react/w6_FE/src/modules/redux/user.js"],"sourcesContent":["// user.js\nimport { apis } from '../../api/index';\n\n// action\nconst SIGNIN = 'user/SIGNIN';\nconst SIGNOUT = 'user/SIGNOUT';\nconst SIGNUP = 'user/SIGNUP';\n\n// initial state \nconst initialState = {\n  user: [],\n  mypage: [],\n}\n\n// action creator\nexport const signIn = (user_info) => {\n  return {type: SIGNIN, user_info};\n};\nexport const signOut = () => {\n  return {type: SIGNOUT};\n}\nexport const signUp = (user_info) => {\n  return {type: SIGNUP, signUp}\n}\n\n\n// middlewares\nexport const signInAxios = (user_info) => {\n  return async (dispatch) => {\n    const user = await apis.signIn(user_info);\n    const userId = user.data.id; // db 연결 후 : userId\n    dispatch(signIn({...user_info, userId: userId}));\n  }\n}\nexport const signOutAxios = () => {\n  return async (dispatch) => {\n    // apis.signOut(); db 연결 후 살리기\n    dispatch(signOut());\n  }\n}\nexport const signUpAxios = (user_info) => {\n  return async (dispatch, useState, { history }) => {\n    await apis.signUp(user_info);\n    await dispatch(signUp(user_info));\n    history.push('/', {replace: true});\n  }\n}\nexport const loadMypageAxios = () => {\n  return async (dispatch) => {\n    const mypageData = await apis.mypage();\n    console.log(mypageData)\n  }\n}\n\n// reducer\nexport default function reducer(state = initialState, action = {}) {\n  switch(action.type){\n    case 'user/SIGNIN': {\n      const user_info = {...action.user_info};\n      return {user: [user_info], mypage: []};\n    }\n    case 'user/SIGNOUT': {\n      return {user: [], mypage: []};\n    }\n    case 'user/SIGNUP': {\n      return state;\n    }\n    default: {\n      return state;\n    }\n  }\n}  "],"mappings":"AAAA;AACA,SAASA,IAAT,QAAqB,iBAArB,C,CAEA;;AACA,MAAMC,MAAM,GAAG,aAAf;AACA,MAAMC,OAAO,GAAG,cAAhB;AACA,MAAMC,MAAM,GAAG,aAAf,C,CAEA;;AACA,MAAMC,YAAY,GAAG;EACnBC,IAAI,EAAE,EADa;EAEnBC,MAAM,EAAE;AAFW,CAArB,C,CAKA;;AACA,OAAO,MAAMC,MAAM,GAAIC,SAAD,IAAe;EACnC,OAAO;IAACC,IAAI,EAAER,MAAP;IAAeO;EAAf,CAAP;AACD,CAFM;AAGP,OAAO,MAAME,OAAO,GAAG,MAAM;EAC3B,OAAO;IAACD,IAAI,EAAEP;EAAP,CAAP;AACD,CAFM;AAGP,OAAO,MAAMS,MAAM,GAAIH,SAAD,IAAe;EACnC,OAAO;IAACC,IAAI,EAAEN,MAAP;IAAeQ;EAAf,CAAP;AACD,CAFM,C,CAKP;;AACA,OAAO,MAAMC,WAAW,GAAIJ,SAAD,IAAe;EACxC,OAAO,MAAOK,QAAP,IAAoB;IACzB,MAAMR,IAAI,GAAG,MAAML,IAAI,CAACO,MAAL,CAAYC,SAAZ,CAAnB;IACA,MAAMM,MAAM,GAAGT,IAAI,CAACU,IAAL,CAAUC,EAAzB,CAFyB,CAEI;;IAC7BH,QAAQ,CAACN,MAAM,CAAC,EAAC,GAAGC,SAAJ;MAAeM,MAAM,EAAEA;IAAvB,CAAD,CAAP,CAAR;EACD,CAJD;AAKD,CANM;AAOP,OAAO,MAAMG,YAAY,GAAG,MAAM;EAChC,OAAO,MAAOJ,QAAP,IAAoB;IACzB;IACAA,QAAQ,CAACH,OAAO,EAAR,CAAR;EACD,CAHD;AAID,CALM;AAMP,OAAO,MAAMQ,WAAW,GAAIV,SAAD,IAAe;EACxC,OAAO,OAAOK,QAAP,EAAiBM,QAAjB,WAA2C;IAAA,IAAhB;MAAEC;IAAF,CAAgB;IAChD,MAAMpB,IAAI,CAACW,MAAL,CAAYH,SAAZ,CAAN;IACA,MAAMK,QAAQ,CAACF,MAAM,CAACH,SAAD,CAAP,CAAd;IACAY,OAAO,CAACC,IAAR,CAAa,GAAb,EAAkB;MAACC,OAAO,EAAE;IAAV,CAAlB;EACD,CAJD;AAKD,CANM;AAOP,OAAO,MAAMC,eAAe,GAAG,MAAM;EACnC,OAAO,MAAOV,QAAP,IAAoB;IACzB,MAAMW,UAAU,GAAG,MAAMxB,IAAI,CAACM,MAAL,EAAzB;IACAmB,OAAO,CAACC,GAAR,CAAYF,UAAZ;EACD,CAHD;AAID,CALM,C,CAOP;;AACA,eAAe,SAASG,OAAT,GAAoD;EAAA,IAAnCC,KAAmC,uEAA3BxB,YAA2B;EAAA,IAAbyB,MAAa,uEAAJ,EAAI;;EACjE,QAAOA,MAAM,CAACpB,IAAd;IACE,KAAK,aAAL;MAAoB;QAClB,MAAMD,SAAS,GAAG,EAAC,GAAGqB,MAAM,CAACrB;QAAX,CAAlB;QACA,OAAO;UAACH,IAAI,EAAE,CAACG,SAAD,CAAP;UAAoBF,MAAM,EAAE;QAA5B,CAAP;MACD;;IACD,KAAK,cAAL;MAAqB;QACnB,OAAO;UAACD,IAAI,EAAE,EAAP;UAAWC,MAAM,EAAE;QAAnB,CAAP;MACD;;IACD,KAAK,aAAL;MAAoB;QAClB,OAAOsB,KAAP;MACD;;IACD;MAAS;QACP,OAAOA,KAAP;MACD;EAbH;AAeD"},"metadata":{},"sourceType":"module"}